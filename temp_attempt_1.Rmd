---
title: "Get temperature data"
author: "Julianna Renzi"
date: "2/19/2021"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)

require(rgee)
require(reticulate)
library(tidyverse)
library(sf)
library(here)
library(geojsonio)
library(tsibble)
library(feasts)
```

Working through this tutorial: https://github.com/r-spatial/rgee

```{r}
# 1. Initialize the Python Environment  
# first time run: rgee::ee_install()
ee_Initialize()

# 2. Install geemap in the same Python ENV that use rgee
# py_install("geemap")
# gm <- import("geemap")

# Integrate rgee with geemap.
# library(rgee)
# ee_Initialize()
# ee_install_upgrade()
```
Read in Florida National Marine Park data (from: https://sanctuaries.noaa.gov/library/imast_gis.html)

```{r}
fknms <- read_sf(dsn = here("fknms_py2", "fknms_py.shp"))

st_crs(fknms) # has a crs

# plot(fknms) # this breaks it
```
## Get general code down

```{r}
# try to bring in MODIS data
modis0m_94_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-01-01", "1994-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# this only pulls 1.5 months at a time--will have to go month by month

# this is the time consuming step:
ee_modis_sst_94_1 <- ee_extract(x = modis0m_94_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # this is the default
                           sf = FALSE)



```

## Run for every other 6 month block

```{r}
# 1994, Feb
modis0m_94_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-02-01", "1994-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_94_2 <- ee_extract(x = modis0m_94_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1994, March
modis0m_94_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-03-01", "1994-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_94_3 <- ee_extract(x = modis0m_94_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)


# 1994, April
modis0m_94_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-04-01", "1994-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_94_4 <- ee_extract(x = modis0m_94_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)


# 1994, May
modis0m_94_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-05-01", "1994-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_94_5 <- ee_extract(x = modis0m_94_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1994, June
modis0m_94_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-06-01", "1994-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_94_6 <- ee_extract(x = modis0m_94_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1994, July
modis0m_94_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-07-01", "1994-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_94_7 <- ee_extract(x = modis0m_94_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1994, August
modis0m_94_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-08-01", "1994-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_94_8 <- ee_extract(x = modis0m_94_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1994, September
modis0m_94_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-09-01", "1994-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_94_9 <- ee_extract(x = modis0m_94_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1994, October
modis0m_94_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-10-01", "1994-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_94_10 <- ee_extract(x = modis0m_94_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1994, November
modis0m_94_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-11-01", "1994-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_94_11 <- ee_extract(x = modis0m_94_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1994, December
modis0m_94_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1994-12-01", "1995-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_94_12 <- ee_extract(x = modis0m_94_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)



```

Combine (this is a horrible method I'm sorry)

```{r}
ee_modis_sst_94_1 <- ee_modis_sst_94_1 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_94_2 <- ee_modis_sst_94_2 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_94_3 <- ee_modis_sst_94_3 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_94_4 <- ee_modis_sst_94_4 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_94_5 <- ee_modis_sst_94_5 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_94_6 <- ee_modis_sst_94_6 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_94_7 <- ee_modis_sst_94_7 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_94_8 <- ee_modis_sst_94_8 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_94_9 <- ee_modis_sst_94_9 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_94_10 <- ee_modis_sst_94_10 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_94_11 <- ee_modis_sst_94_11 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_94_12 <- ee_modis_sst_94_12 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

modis_1994 <- rbind(ee_modis_sst_94_1, ee_modis_sst_94_2, ee_modis_sst_94_3, ee_modis_sst_94_4, ee_modis_sst_94_5, ee_modis_sst_94_6, ee_modis_sst_94_7, ee_modis_sst_94_8, ee_modis_sst_94_9, ee_modis_sst_94_10, ee_modis_sst_94_11, ee_modis_sst_94_12)

# just in case I lose everything tomorrow:
# write_csv(modis_1994, here("temp_data", "modis_SST0m_1994.csv"))
```


## 1995

```{r}
# 1995, Jan
modis0m_95_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-01-01", "1995-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_1 <- ee_extract(x = modis0m_95_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)


# 1995, Feb
modis0m_95_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-02-01", "1995-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_2 <- ee_extract(x = modis0m_95_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1995, March
modis0m_95_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-03-01", "1995-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_3 <- ee_extract(x = modis0m_95_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)


# 1995, April
modis0m_95_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-04-01", "1995-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_4 <- ee_extract(x = modis0m_95_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)


# 1995, May
modis0m_95_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-05-01", "1995-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_5 <- ee_extract(x = modis0m_95_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1995, June
modis0m_95_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-06-01", "1995-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_6 <- ee_extract(x = modis0m_95_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1995, July
modis0m_95_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-07-01", "1995-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_7 <- ee_extract(x = modis0m_95_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1995, August
modis0m_95_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-08-01", "1995-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_8 <- ee_extract(x = modis0m_95_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1995, September
modis0m_95_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-09-01", "1995-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_9 <- ee_extract(x = modis0m_95_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1995, October
modis0m_95_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-10-01", "1995-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_10 <- ee_extract(x = modis0m_95_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1995, November
modis0m_95_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-11-01", "1995-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_11 <- ee_extract(x = modis0m_95_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)

# 1995, December
modis0m_95_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1995-12-01", "1996-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_95_12 <- ee_extract(x = modis0m_95_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE)



```

Combine (this is a horrible method I'm sorry)--starting the next year this is slightly better

```{r}
ee_modis_sst_95_1 <- ee_modis_sst_95_1 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_95_2 <- ee_modis_sst_95_2 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_95_3 <- ee_modis_sst_95_3 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_95_4 <- ee_modis_sst_95_4 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_95_5 <- ee_modis_sst_95_5 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_95_6 <- ee_modis_sst_95_6 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_95_7 <- ee_modis_sst_95_7 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_95_8 <- ee_modis_sst_95_8 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_95_9 <- ee_modis_sst_95_9 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_95_10 <- ee_modis_sst_95_10 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_95_11 <- ee_modis_sst_95_11 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

ee_modis_sst_95_12 <- ee_modis_sst_95_12 %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

modis_1995 <- rbind(ee_modis_sst_95_1, ee_modis_sst_95_2, ee_modis_sst_95_3, ee_modis_sst_95_4, ee_modis_sst_95_5, ee_modis_sst_95_6, ee_modis_sst_95_7, ee_modis_sst_95_8, ee_modis_sst_95_9, ee_modis_sst_95_10, ee_modis_sst_95_11, ee_modis_sst_95_12)

# just in case I lose everything tomorrow:
# write_csv(modis_1995, here("temp_data", "modis_SST0m_1995.csv"))
```

## 1996

```{r}
# 1996, Jan
modis0m_96_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-01-01", "1996-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_1 <- ee_extract(x = modis0m_96_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1996, Feb
modis0m_96_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-02-01", "1996-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_2 <- ee_extract(x = modis0m_96_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1996, March
modis0m_96_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-03-01", "1996-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_3 <- ee_extract(x = modis0m_96_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1996, April
modis0m_96_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-04-01", "1996-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_4 <- ee_extract(x = modis0m_96_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1996, May
modis0m_96_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-05-01", "1996-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_5 <- ee_extract(x = modis0m_96_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1996, June
modis0m_96_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-06-01", "1996-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_6 <- ee_extract(x = modis0m_96_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1996, July
modis0m_96_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-07-01", "1996-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_7 <- ee_extract(x = modis0m_96_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1996, August
modis0m_96_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-08-01", "1996-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_8 <- ee_extract(x = modis0m_96_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1996, September
modis0m_96_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-09-01", "1996-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_9 <- ee_extract(x = modis0m_96_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1996, October
modis0m_96_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-10-01", "1996-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_10 <- ee_extract(x = modis0m_96_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1996, November
modis0m_96_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-11-01", "1996-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_11 <- ee_extract(x = modis0m_96_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1996, December
modis0m_96_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1996-12-01", "1997-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_96_12 <- ee_extract(x = modis0m_96_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)



```

Combine 

```{r}
modis_1996 <- rbind(ee_modis_sst_96_1, ee_modis_sst_96_2, ee_modis_sst_96_3, ee_modis_sst_96_4, ee_modis_sst_96_5, ee_modis_sst_96_6, ee_modis_sst_96_7, ee_modis_sst_96_8, ee_modis_sst_96_9, ee_modis_sst_96_10, ee_modis_sst_96_11, ee_modis_sst_96_12)

# just in case I lose everything tomorrow:
# write_csv(modis_1996, here("temp_data", "modis_SST0m_1996.csv"))
```


## 1997

```{r}
# 1997, Jan
modis0m_97_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-01-01", "1997-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_1 <- ee_extract(x = modis0m_97_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1997, Feb
modis0m_97_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-02-01", "1997-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_2 <- ee_extract(x = modis0m_97_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1997, March
modis0m_97_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-03-01", "1997-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_3 <- ee_extract(x = modis0m_97_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1997, April
modis0m_97_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-04-01", "1997-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_4 <- ee_extract(x = modis0m_97_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1997, May
modis0m_97_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-05-01", "1997-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_5 <- ee_extract(x = modis0m_97_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1997, June
modis0m_97_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-06-01", "1997-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_6 <- ee_extract(x = modis0m_97_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1997, July
modis0m_97_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-07-01", "1997-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_7 <- ee_extract(x = modis0m_97_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1997, August
modis0m_97_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-08-01", "1997-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_8 <- ee_extract(x = modis0m_97_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1997, September
modis0m_97_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-09-01", "1997-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_9 <- ee_extract(x = modis0m_97_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1997, October
modis0m_97_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-10-01", "1997-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_10 <- ee_extract(x = modis0m_97_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1997, November
modis0m_97_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-11-01", "1997-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_11 <- ee_extract(x = modis0m_97_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1997, December
modis0m_97_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1997-12-01", "1998-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_97_12 <- ee_extract(x = modis0m_97_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)



```

Combine 

```{r}
modis_1997 <- rbind(ee_modis_sst_97_1, ee_modis_sst_97_2, ee_modis_sst_97_3, ee_modis_sst_97_4, ee_modis_sst_97_5, ee_modis_sst_97_6, ee_modis_sst_97_7, ee_modis_sst_97_8, ee_modis_sst_97_9, ee_modis_sst_97_10, ee_modis_sst_97_11, ee_modis_sst_97_12)

# just in case I lose everything tomorrow:
# write_csv(modis_1997, here("temp_data", "modis_SST0m_1997.csv"))
```

## 1998

```{r}
# 1998, Jan
modis0m_98_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-01-01", "1998-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_1 <- ee_extract(x = modis0m_98_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1998, Feb
modis0m_98_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-02-01", "1998-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_2 <- ee_extract(x = modis0m_98_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1998, March
modis0m_98_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-03-01", "1998-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_3 <- ee_extract(x = modis0m_98_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1998, April
modis0m_98_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-04-01", "1998-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_4 <- ee_extract(x = modis0m_98_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1998, May
modis0m_98_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-05-01", "1998-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_5 <- ee_extract(x = modis0m_98_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1998, June
modis0m_98_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-06-01", "1998-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_6 <- ee_extract(x = modis0m_98_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1998, July
modis0m_98_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-07-01", "1998-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_7 <- ee_extract(x = modis0m_98_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1998, August
modis0m_98_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-08-01", "1998-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_8 <- ee_extract(x = modis0m_98_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1998, September
modis0m_98_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-09-01", "1998-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_9 <- ee_extract(x = modis0m_98_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1998, October
modis0m_98_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-10-01", "1998-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_10 <- ee_extract(x = modis0m_98_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1998, November
modis0m_98_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-11-01", "1998-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_11 <- ee_extract(x = modis0m_98_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1998, December
modis0m_98_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1998-12-01", "1999-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_98_12 <- ee_extract(x = modis0m_98_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)
```

Combine 

```{r}
modis_1998 <- rbind(ee_modis_sst_98_1, ee_modis_sst_98_2, ee_modis_sst_98_3, ee_modis_sst_98_4, ee_modis_sst_98_5, ee_modis_sst_98_6, ee_modis_sst_98_7, ee_modis_sst_98_8, ee_modis_sst_98_9, ee_modis_sst_98_10, ee_modis_sst_98_11, ee_modis_sst_98_12)

# just in case I lose everything tomorrow:
# write_csv(modis_1998, here("temp_data", "modis_SST0m_1998.csv"))
```

## 1999

```{r}
# 1999, Jan
modis0m_99_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-01-01", "1999-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_1 <- ee_extract(x = modis0m_99_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1999, Feb
modis0m_99_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-02-01", "1999-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_2 <- ee_extract(x = modis0m_99_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1999, March
modis0m_99_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-03-01", "1999-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_3 <- ee_extract(x = modis0m_99_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1999, April
modis0m_99_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-04-01", "1999-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_4 <- ee_extract(x = modis0m_99_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 1999, May
modis0m_99_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-05-01", "1999-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_5 <- ee_extract(x = modis0m_99_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1999, June
modis0m_99_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-06-01", "1999-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_6 <- ee_extract(x = modis0m_99_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1999, July
modis0m_99_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-07-01", "1999-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_7 <- ee_extract(x = modis0m_99_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1998, August
modis0m_99_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-08-01", "1999-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_8 <- ee_extract(x = modis0m_99_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1999, September
modis0m_99_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-09-01", "1999-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_9 <- ee_extract(x = modis0m_99_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1999, October
modis0m_99_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-10-01", "1999-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_10 <- ee_extract(x = modis0m_99_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1999, November
modis0m_99_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-11-01", "1999-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_11 <- ee_extract(x = modis0m_99_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 1999, December
modis0m_99_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("1999-12-01", "2000-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_99_12 <- ee_extract(x = modis0m_99_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)
```

Combine 

```{r}
modis_1999 <- rbind(ee_modis_sst_99_1, ee_modis_sst_99_2, ee_modis_sst_99_3, ee_modis_sst_99_4, ee_modis_sst_99_5, ee_modis_sst_99_6, ee_modis_sst_99_7, ee_modis_sst_99_8, ee_modis_sst_99_9, ee_modis_sst_99_10, ee_modis_sst_99_11, ee_modis_sst_99_12)

# just in case I lose everything tomorrow:
# write_csv(modis_1999, here("temp_data", "modis_SST0m_1999.csv"))
```

## 2000

```{r}
# 2000, Jan
modis0m_00_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-01-01", "2000-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_1 <- ee_extract(x = modis0m_00_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2000, Feb
modis0m_00_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-02-01", "2000-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_2 <- ee_extract(x = modis0m_00_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2000, March
modis0m_00_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-03-01", "2000-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_3 <- ee_extract(x = modis0m_00_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2000, April
modis0m_00_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-04-01", "2000-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_4 <- ee_extract(x = modis0m_00_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2000, May
modis0m_00_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-05-01", "2000-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_5 <- ee_extract(x = modis0m_00_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2000, June
modis0m_00_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-06-01", "2000-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_6 <- ee_extract(x = modis0m_00_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2000, July
modis0m_00_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-07-01", "2000-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_7 <- ee_extract(x = modis0m_00_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2000, August
modis0m_00_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-08-01", "2000-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_8 <- ee_extract(x = modis0m_00_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2000, September
modis0m_00_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-09-01", "2000-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_9 <- ee_extract(x = modis0m_00_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2000, October
modis0m_00_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-10-01", "2000-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_10 <- ee_extract(x = modis0m_00_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2000, November
modis0m_00_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-11-01", "2000-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_11 <- ee_extract(x = modis0m_00_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2000, December
modis0m_00_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2000-12-01", "2001-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_00_12 <- ee_extract(x = modis0m_00_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

```

Combine 

```{r}
modis_2000 <- rbind(ee_modis_sst_00_1, ee_modis_sst_00_2, ee_modis_sst_00_3, ee_modis_sst_00_4, ee_modis_sst_00_5, ee_modis_sst_00_6, ee_modis_sst_00_7, ee_modis_sst_00_8, ee_modis_sst_00_9, ee_modis_sst_00_10, ee_modis_sst_00_11, ee_modis_sst_00_12)

# just in case I lose everything tomorrow:
# write_csv(modis_2000, here("temp_data", "modis_SST0m_2000.csv"))
```

## 2001

```{r}

# 2001, Jan
modis0m_01_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-01-01", "2001-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_1 <- ee_extract(x = modis0m_01_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2001, Feb
modis0m_01_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-02-01", "2001-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_2 <- ee_extract(x = modis0m_01_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2001, March
modis0m_01_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-03-01", "2001-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_3 <- ee_extract(x = modis0m_01_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2001, April
modis0m_01_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-04-01", "2001-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_4 <- ee_extract(x = modis0m_01_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2001, May
modis0m_01_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-05-01", "2001-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_5 <- ee_extract(x = modis0m_01_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2001, June
modis0m_01_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-06-01", "2001-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_6 <- ee_extract(x = modis0m_01_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2001, July
modis0m_01_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-07-01", "2001-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_7 <- ee_extract(x = modis0m_01_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2001, August
modis0m_01_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-08-01", "2001-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_8 <- ee_extract(x = modis0m_01_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2001, September
modis0m_01_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-09-01", "2001-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_9 <- ee_extract(x = modis0m_01_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2001, October
modis0m_01_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-10-01", "2001-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_10 <- ee_extract(x = modis0m_01_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2001, November
modis0m_01_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-11-01", "2001-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_11 <- ee_extract(x = modis0m_01_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2001, December
modis0m_01_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2001-12-01", "2002-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_01_12 <- ee_extract(x = modis0m_01_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


```

Combine 

```{r}
modis_2001 <- rbind(ee_modis_sst_01_1, ee_modis_sst_01_2, ee_modis_sst_01_3, ee_modis_sst_01_4, ee_modis_sst_01_5, ee_modis_sst_01_6, ee_modis_sst_01_7, ee_modis_sst_01_8, ee_modis_sst_01_9, ee_modis_sst_01_10, ee_modis_sst_01_11, ee_modis_sst_01_12)

# just in case I lose everything tomorrow:
# write_csv(modis_2001, here("temp_data", "modis_SST0m_2001.csv"))
```

## 2002

```{r}

# 2002, Jan
modis0m_02_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-01-01", "2002-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_1 <- ee_extract(x = modis0m_02_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2002, Feb
modis0m_02_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-02-01", "2002-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_2 <- ee_extract(x = modis0m_02_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, March
modis0m_02_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-03-01", "2002-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_3 <- ee_extract(x = modis0m_02_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2002, April
modis0m_02_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-04-01", "2002-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_4 <- ee_extract(x = modis0m_02_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2002, May
modis0m_02_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-05-01", "2002-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_5 <- ee_extract(x = modis0m_02_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, June
modis0m_02_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-06-01", "2002-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_6 <- ee_extract(x = modis0m_02_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, July
modis0m_02_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-07-01", "2002-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_7 <- ee_extract(x = modis0m_02_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, August
modis0m_02_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-08-01", "2002-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_8 <- ee_extract(x = modis0m_02_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, September
modis0m_02_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-09-01", "2002-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_9 <- ee_extract(x = modis0m_02_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, October
modis0m_02_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-10-01", "2002-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_10 <- ee_extract(x = modis0m_02_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, November
modis0m_02_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-11-01", "2002-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_11 <- ee_extract(x = modis0m_02_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, December
modis0m_02_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-12-01", "2003-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_12 <- ee_extract(x = modis0m_02_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


```

Combine 

```{r}
modis_2002 <- rbind(ee_modis_sst_02_1, ee_modis_sst_02_2, ee_modis_sst_02_3, ee_modis_sst_02_4, ee_modis_sst_02_5, ee_modis_sst_02_6, ee_modis_sst_02_7, ee_modis_sst_02_8, ee_modis_sst_02_9, ee_modis_sst_02_10, ee_modis_sst_02_11, ee_modis_sst_02_12)

# just in case I lose everything tomorrow:
# write_csv(modis_2002, here("temp_data", "modis_SST0m_2002.csv"))
```

## 2003

```{r}

# 2003, Jan
modis0m_03_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-01-01", "2003-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_1 <- ee_extract(x = modis0m_03_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2003, Feb
modis0m_03_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-02-01", "2003-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_2 <- ee_extract(x = modis0m_03_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, March
modis0m_03_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-03-01", "2003-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_3 <- ee_extract(x = modis0m_03_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2003, April
modis0m_03_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-04-01", "2003-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_4 <- ee_extract(x = modis0m_03_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2003, May
modis0m_03_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-05-01", "2003-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_5 <- ee_extract(x = modis0m_03_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, June
modis0m_03_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-06-01", "2003-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_6 <- ee_extract(x = modis0m_03_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, July
modis0m_03_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-07-01", "2003-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_7 <- ee_extract(x = modis0m_03_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, August
modis0m_03_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-08-01", "2003-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_8 <- ee_extract(x = modis0m_03_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, September
modis0m_03_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-09-01", "2003-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_9 <- ee_extract(x = modis0m_03_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, October
modis0m_03_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-10-01", "2003-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_10 <- ee_extract(x = modis0m_03_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, November
modis0m_03_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-11-01", "2003-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_11 <- ee_extract(x = modis0m_03_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, December
modis0m_03_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-12-01", "2004-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_12 <- ee_extract(x = modis0m_03_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


```

Combine 

```{r}
modis_2003 <- rbind(ee_modis_sst_03_1, ee_modis_sst_03_2, ee_modis_sst_03_3, ee_modis_sst_03_4, ee_modis_sst_03_5, ee_modis_sst_03_6, ee_modis_sst_03_7, ee_modis_sst_03_8, ee_modis_sst_03_9, ee_modis_sst_03_10, ee_modis_sst_03_11, ee_modis_sst_03_12)

# just in case I lose everything tomorrow:
# write_csv(modis_2003, here("temp_data", "modis_SST0m_2003.csv"))
```


## Multiple runs for overnight: 2004

```{r}

# 2002, Jan
modis0m_02_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-01-01", "2002-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_1 <- ee_extract(x = modis0m_02_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2002, Feb
modis0m_02_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-02-01", "2002-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_2 <- ee_extract(x = modis0m_02_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, March
modis0m_02_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-03-01", "2002-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_3 <- ee_extract(x = modis0m_02_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2002, April
modis0m_02_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-04-01", "2002-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_4 <- ee_extract(x = modis0m_02_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2002, May
modis0m_02_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-05-01", "2002-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_5 <- ee_extract(x = modis0m_02_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, June
modis0m_02_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-06-01", "2002-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_6 <- ee_extract(x = modis0m_02_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, July
modis0m_02_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-07-01", "2002-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_7 <- ee_extract(x = modis0m_02_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, August
modis0m_02_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-08-01", "2002-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_8 <- ee_extract(x = modis0m_02_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, September
modis0m_02_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-09-01", "2002-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_9 <- ee_extract(x = modis0m_02_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, October
modis0m_02_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-10-01", "2002-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_10 <- ee_extract(x = modis0m_02_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, November
modis0m_02_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-11-01", "2002-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_11 <- ee_extract(x = modis0m_02_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2002, December
modis0m_02_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2002-12-01", "2003-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_02_12 <- ee_extract(x = modis0m_02_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)







# 2003, Jan
modis0m_03_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-01-01", "2003-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_1 <- ee_extract(x = modis0m_03_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2003, Feb
modis0m_03_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-02-01", "2003-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_2 <- ee_extract(x = modis0m_03_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, March
modis0m_03_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-03-01", "2003-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_3 <- ee_extract(x = modis0m_03_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2003, April
modis0m_03_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-04-01", "2003-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_4 <- ee_extract(x = modis0m_03_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2003, May
modis0m_03_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-05-01", "2003-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_5 <- ee_extract(x = modis0m_03_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, June
modis0m_03_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-06-01", "2003-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_6 <- ee_extract(x = modis0m_03_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, July
modis0m_03_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-07-01", "2003-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_7 <- ee_extract(x = modis0m_03_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, August
modis0m_03_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-08-01", "2003-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_8 <- ee_extract(x = modis0m_03_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, September
modis0m_03_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-09-01", "2003-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_9 <- ee_extract(x = modis0m_03_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, October
modis0m_03_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-10-01", "2003-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_10 <- ee_extract(x = modis0m_03_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, November
modis0m_03_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-11-01", "2003-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_11 <- ee_extract(x = modis0m_03_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2003, December
modis0m_03_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2003-12-01", "2004-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_03_12 <- ee_extract(x = modis0m_03_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)









# 2004, Jan
modis0m_04_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-01-01", "2004-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_1 <- ee_extract(x = modis0m_04_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2004, Feb
modis0m_04_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-02-01", "2004-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_2 <- ee_extract(x = modis0m_04_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2004, March
modis0m_04_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-03-01", "2004-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_3 <- ee_extract(x = modis0m_04_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2004, April
modis0m_04_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-04-01", "2004-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_4 <- ee_extract(x = modis0m_04_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2004, May
modis0m_04_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-05-01", "2004-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_5 <- ee_extract(x = modis0m_04_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2004, June
modis0m_04_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-06-01", "2004-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_6 <- ee_extract(x = modis0m_04_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2004, July
modis0m_04_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-07-01", "2004-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_7 <- ee_extract(x = modis0m_04_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2004, August
modis0m_04_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-08-01", "2004-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_8 <- ee_extract(x = modis0m_04_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2004, September
modis0m_04_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-09-01", "2004-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_9 <- ee_extract(x = modis0m_04_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2004, October
modis0m_04_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-10-01", "2004-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_10 <- ee_extract(x = modis0m_04_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2004, November
modis0m_04_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-11-01", "2004-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_11 <- ee_extract(x = modis0m_04_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2004, December
modis0m_04_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2004-12-01", "2005-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_04_12 <- ee_extract(x = modis0m_04_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)









# 2005 
# 2005, Jan
modis0m_05_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-01-01", "2005-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_1 <- ee_extract(x = modis0m_05_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2005, Feb
modis0m_05_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-02-01", "2005-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_2 <- ee_extract(x = modis0m_05_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2005, March
modis0m_05_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-03-01", "2005-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_3 <- ee_extract(x = modis0m_05_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2005, April
modis0m_05_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-04-01", "2005-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_4 <- ee_extract(x = modis0m_05_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2005, May
modis0m_05_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-05-01", "2005-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_5 <- ee_extract(x = modis0m_05_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2005, June
modis0m_05_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-06-01", "2005-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_6 <- ee_extract(x = modis0m_05_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2005, July
modis0m_05_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-07-01", "2005-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_7 <- ee_extract(x = modis0m_05_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2005, August
modis0m_05_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-08-01", "2005-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_8 <- ee_extract(x = modis0m_05_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2005, September
modis0m_05_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-09-01", "2005-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_9 <- ee_extract(x = modis0m_05_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2005, October
modis0m_05_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-10-01", "2005-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_10 <- ee_extract(x = modis0m_05_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2005, November
modis0m_05_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-11-01", "2005-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_11 <- ee_extract(x = modis0m_05_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2005, December
modis0m_05_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2005-12-01", "2006-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_05_12 <- ee_extract(x = modis0m_05_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)









# 2006

# 2006, Jan
modis0m_06_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-01-01", "2006-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_1 <- ee_extract(x = modis0m_06_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2006, Feb
modis0m_06_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-02-01", "2006-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_2 <- ee_extract(x = modis0m_06_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2006, March
modis0m_06_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-03-01", "2006-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_3 <- ee_extract(x = modis0m_06_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2006, April
modis0m_06_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-04-01", "2006-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_4 <- ee_extract(x = modis0m_06_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2006, May
modis0m_06_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-05-01", "2006-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_5 <- ee_extract(x = modis0m_06_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2006, June
modis0m_06_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-06-01", "2006-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_6 <- ee_extract(x = modis0m_06_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2006, July
modis0m_06_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-07-01", "2006-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_7 <- ee_extract(x = modis0m_06_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2006, August
modis0m_06_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-08-01", "2006-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_8 <- ee_extract(x = modis0m_06_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2006, September
modis0m_06_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-09-01", "2006-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_9 <- ee_extract(x = modis0m_06_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2006, October
modis0m_06_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-10-01", "2006-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_10 <- ee_extract(x = modis0m_06_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2006, November
modis0m_06_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-11-01", "2006-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_11 <- ee_extract(x = modis0m_06_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2006, December
modis0m_06_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2006-12-01", "2007-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_06_12 <- ee_extract(x = modis0m_06_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)











# 2007

# 2007, Jan
modis0m_07_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-01-01", "2007-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_1 <- ee_extract(x = modis0m_07_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2007, Feb
modis0m_07_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-02-01", "2007-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_2 <- ee_extract(x = modis0m_07_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2007, March
modis0m_07_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-03-01", "2007-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_3 <- ee_extract(x = modis0m_07_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2007, April
modis0m_07_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-04-01", "2007-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_4 <- ee_extract(x = modis0m_07_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2007, May
modis0m_07_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-05-01", "2007-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_5 <- ee_extract(x = modis0m_07_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2007, June
modis0m_07_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-06-01", "2007-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_6 <- ee_extract(x = modis0m_07_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2007, July
modis0m_07_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-07-01", "2007-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_7 <- ee_extract(x = modis0m_07_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2007, August
modis0m_07_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-08-01", "2007-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_8 <- ee_extract(x = modis0m_07_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2007, September
modis0m_07_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-09-01", "2007-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_9 <- ee_extract(x = modis0m_07_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2007, October
modis0m_07_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-10-01", "2007-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_10 <- ee_extract(x = modis0m_07_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2007, November
modis0m_07_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-11-01", "2007-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_11 <- ee_extract(x = modis0m_07_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2007, December
modis0m_07_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2007-12-01", "2008-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_07_12 <- ee_extract(x = modis0m_07_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)












# 2008

# 2008, Jan
modis0m_08_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-01-01", "2008-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_1 <- ee_extract(x = modis0m_08_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2008, Feb
modis0m_08_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-02-01", "2008-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_2 <- ee_extract(x = modis0m_08_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2008, March
modis0m_08_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-03-01", "2008-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_3 <- ee_extract(x = modis0m_08_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2008, April
modis0m_08_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-04-01", "2008-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_4 <- ee_extract(x = modis0m_08_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2008, May
modis0m_08_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-05-01", "2008-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_5 <- ee_extract(x = modis0m_08_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2008, June
modis0m_08_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-06-01", "2008-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_6 <- ee_extract(x = modis0m_08_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2008, July
modis0m_08_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-07-01", "2008-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_7 <- ee_extract(x = modis0m_08_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2008, August
modis0m_08_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-08-01", "2008-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_8 <- ee_extract(x = modis0m_08_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2008, September
modis0m_08_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-09-01", "2008-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_9 <- ee_extract(x = modis0m_08_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2008, October
modis0m_08_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-10-01", "2008-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_10 <- ee_extract(x = modis0m_08_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2008, November
modis0m_08_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-11-01", "2008-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_11 <- ee_extract(x = modis0m_08_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2008, December
modis0m_08_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2008-12-01", "2009-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_08_12 <- ee_extract(x = modis0m_08_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)














# 2009

# 2009, Jan
modis0m_09_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-01-01", "2009-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_1 <- ee_extract(x = modis0m_09_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2009, Feb
modis0m_09_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-02-01", "2009-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_2 <- ee_extract(x = modis0m_09_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2009, March
modis0m_09_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-03-01", "2009-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_3 <- ee_extract(x = modis0m_09_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2009, April
modis0m_09_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-04-01", "2009-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_4 <- ee_extract(x = modis0m_09_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2009, May
modis0m_09_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-05-01", "2009-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_5 <- ee_extract(x = modis0m_09_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2009, June
modis0m_09_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-06-01", "2009-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_6 <- ee_extract(x = modis0m_09_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2009, July
modis0m_09_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-07-01", "2009-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_7 <- ee_extract(x = modis0m_09_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2009, August
modis0m_09_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-08-01", "2009-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_8 <- ee_extract(x = modis0m_09_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2009, September
modis0m_09_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-09-01", "2009-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_9 <- ee_extract(x = modis0m_09_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2009, October
modis0m_09_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-10-01", "2009-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_10 <- ee_extract(x = modis0m_09_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2009, November
modis0m_09_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-11-01", "2009-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_11 <- ee_extract(x = modis0m_09_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2009, December
modis0m_09_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2009-12-01", "2010-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_09_12 <- ee_extract(x = modis0m_09_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


















# 2010

# 2010, Jan
modis0m_10_1 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-01-01", "2010-02-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_1 <- ee_extract(x = modis0m_10_1, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2010, Feb
modis0m_10_2 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-02-01", "2010-03-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_2 <- ee_extract(x = modis0m_10_2, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2010, March
modis0m_10_3 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-03-01", "2010-04-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_3 <- ee_extract(x = modis0m_10_3, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2010, April
modis0m_10_4 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-04-01", "2010-05-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_4 <- ee_extract(x = modis0m_10_4, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


# 2010, May
modis0m_10_5 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-05-01", "2010-06-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_5 <- ee_extract(x = modis0m_10_5, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2010, June
modis0m_10_6 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-06-01", "2010-07-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_6 <- ee_extract(x = modis0m_10_6, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2010, July
modis0m_10_7 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-07-01", "2010-08-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_7 <- ee_extract(x = modis0m_10_7, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2010, August
modis0m_10_8 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-08-01", "2010-09-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_8 <- ee_extract(x = modis0m_10_8, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2010, September
modis0m_10_9 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-09-01", "2010-10-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_9 <- ee_extract(x = modis0m_10_9, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2010, October
modis0m_10_10 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-10-01", "2010-11-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_10 <- ee_extract(x = modis0m_10_10, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2010, November
modis0m_10_11 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-11-01", "2010-12-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_11 <- ee_extract(x = modis0m_10_11, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)

# 2010, December
modis0m_10_12 <- ee$ImageCollection("HYCOM/sea_temp_salinity") %>% 
  ee$ImageCollection$filterDate("2010-12-01", "2011-01-01") %>% 
  ee$ImageCollection$map(function(x) x$select("water_temp_0")) %>% # Select seawater temperature at 0m 
  ee$ImageCollection$toBands() #%>% # from imagecollection to image
  #ee$Image$rename(sprintf("%02d",1:12)) # rename the bands of an image

# extract
ee_modis_sst_10_12 <- ee_extract(x = modis0m_10_12, 
                           y = fknms["SANCTUARY"], # there's actually only this one
                           fun = ee$Reducer$mean(), # get mean of values
                           scale = 1000, # default 
                           sf = FALSE) %>% 
  pivot_longer(-SANCTUARY, names_to = "date", values_to = "SST_0") %>% 
  mutate(Temperature = SST_0*0.001 + 20)


```

Combine

```{r}
modis_2004 <- rbind(ee_modis_sst_04_1, ee_modis_sst_04_2, ee_modis_sst_04_3, ee_modis_sst_04_4, ee_modis_sst_04_5, ee_modis_sst_04_6, ee_modis_sst_04_7, ee_modis_sst_04_8, ee_modis_sst_04_9, ee_modis_sst_04_10, ee_modis_sst_04_11, ee_modis_sst_04_12)

# just in case I lose everything tomorrow:
# write_csv(modis_2004, here("temp_data", "modis_SST0m_2004.csv"))

modis_2005 <- rbind(ee_modis_sst_05_1, ee_modis_sst_05_2, ee_modis_sst_05_3, ee_modis_sst_05_4, ee_modis_sst_05_5, ee_modis_sst_05_6, ee_modis_sst_05_7, ee_modis_sst_05_8, ee_modis_sst_05_9, ee_modis_sst_05_10, ee_modis_sst_05_11, ee_modis_sst_05_12)

# just in case I lose everything tomorrow:
# write_csv(modis_2005, here("temp_data", "modis_SST0m_2005.csv"))

modis_2006 <- rbind(ee_modis_sst_06_1, ee_modis_sst_06_2, ee_modis_sst_06_3, ee_modis_sst_06_4, ee_modis_sst_06_5, ee_modis_sst_06_6, ee_modis_sst_06_7, ee_modis_sst_06_8, ee_modis_sst_06_9, ee_modis_sst_06_10, ee_modis_sst_06_11, ee_modis_sst_06_12)

# just in case I lose everything tomorrow:
# write_csv(modis_2006, here("temp_data", "modis_SST0m_2006.csv"))

modis_2007 <- rbind(ee_modis_sst_07_1, ee_modis_sst_07_2, ee_modis_sst_07_3, ee_modis_sst_07_4, ee_modis_sst_07_5, ee_modis_sst_07_6, ee_modis_sst_07_7, ee_modis_sst_07_8, ee_modis_sst_07_9, ee_modis_sst_07_10, ee_modis_sst_07_11, ee_modis_sst_07_12)

# just in case I lose everything tomorrow:
# write_csv(modis_2007, here("temp_data", "modis_SST0m_2007.csv"))

modis_2008 <- rbind(ee_modis_sst_08_1, ee_modis_sst_08_2, ee_modis_sst_08_3, ee_modis_sst_08_4, ee_modis_sst_08_5, ee_modis_sst_08_6, ee_modis_sst_08_7, ee_modis_sst_08_8, ee_modis_sst_08_9, ee_modis_sst_08_10, ee_modis_sst_08_11, ee_modis_sst_08_12)

# just in case I lose everything tomorrow:
# write_csv(modis_2008, here("temp_data", "modis_SST0m_2008.csv"))

modis_2009 <- rbind(ee_modis_sst_09_1, ee_modis_sst_09_2, ee_modis_sst_09_3, ee_modis_sst_09_4, ee_modis_sst_09_5, ee_modis_sst_09_6, ee_modis_sst_09_7, ee_modis_sst_09_8, ee_modis_sst_09_9, ee_modis_sst_09_10, ee_modis_sst_09_11, ee_modis_sst_09_12)

# just in case I lose everything tomorrow:
# write_csv(modis_2009, here("temp_data", "modis_SST0m_2009.csv"))

modis_2010 <- rbind(ee_modis_sst_10_1, ee_modis_sst_10_2, ee_modis_sst_10_3, ee_modis_sst_10_4, ee_modis_sst_10_5, ee_modis_sst_10_6, ee_modis_sst_10_7, ee_modis_sst_10_8, ee_modis_sst_10_9, ee_modis_sst_10_10, ee_modis_sst_10_11, ee_modis_sst_10_12)

# just in case I lose everything tomorrow:
# write_csv(modis_2010, here("temp_data", "modis_SST0m_2010.csv"))
```

## Join all together

```{r}
modis_sst <- rbind(modis_1994, modis_1995, modis_1996, 
                   modis_1997, modis_1998, modis_1999,
      modis_2000, modis_2001, modis_2002, modis_2003, modis_2004, modis_2005,
      modis_2006, modis_2007, modis_2008, modis_2009, modis_2010) %>% 
  rowwise %>% # clean up date column
  mutate(datetime = gsub(pattern = "X", replacement = "", x = date)) %>% 
  mutate(datetime = str_split(datetime, pattern = "_")[[1]][1]) %>% 
  mutate(datetime = str_c(substr(datetime, start = 1, stop = nchar(datetime)-6),
                      "/",
                      substr(datetime, start = nchar(datetime)-5, stop = nchar(datetime)-4),
                      "/",
                      substr(datetime, start = nchar(datetime)-3, stop = nchar(datetime)-2))) %>% 
  mutate(datetime = as.POSIXct(datetime, format = "%Y/%m/%d"))
  

# just in case I lose everything tomorrow:
# write_csv(modis_sst, here("temp_data", "modis_SST0m_all.csv"))
```


## Plot

```{r}
# try plotting time series
modis_sst %>%
  ggplot(aes(x = datetime, y = Temperature, group = SANCTUARY)) +
  geom_line(alpha = 0.4) +
  xlab("Year") +
  ylab("SST (°C)") +
  theme_minimal()

```
```{r}
# try plotting seasonplot


```

QUESTIONS:
- Scale/offset: am I doing it right/why?
- Scale for ee_extract?